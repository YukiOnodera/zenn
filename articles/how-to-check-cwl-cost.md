---
title: そのロググループにはいくらかかっているのか？
yaml_title: how-to-check-cwl-cost
created: 2023-12-29 11:34:07
updated: 2023-12-29 12:30:02
tags: 
aliases: 
emoji: 🔥
published: true
published_at: 2024-01-04
topics:
  - AWS
  - Cloudwatch
  - Cost
type: tech
---
# はじめに

AWS の CloudWatch Logs には様々なログが出力されていますが、ロググループ毎にどれくらいの料金がかかっているのか、確認したことはありますか？

今回は、ロググループひとつあたりのコストを簡単に確認する方法をまとめます。

# CloudWatch Logs の料金体系

まず、こちらが CloudWatch Logs にかかる費用の一覧です。

> 2024/01 現在での料金一覧

| ログの管理                | 料金       |
| ------------------------- | ---------- |
|収集 (データインジェスト) |            |
|　　スタンダード        | 0.76USD/GB |
|　　低頻度アクセス                          |            	0.38USD/GB|‎ ‎ ‎ ‎ 
|保存 (アーカイブ)|	0.033USD/GB|
|分析 (Logs Insights のクエリ)	スキャンしたデータ 1 GB あたり| 0.0076USD|
|検出およびマスク (データ保護)	スキャンされたデータ 1 GB あたり| 0.12USD|
|分析 (Live Tail)|	0.01 USD/分|

# ロググループ毎の確認方法

ログの保存にかかる費用は、データ取り込み時の収集から分析まで多岐に渡りますが、今回は大まかなコストの概算をしたいので、収集と保存に絞って確認をしていきます。

## 収集にかかる料金

まず、データ取り込み時にかかる収集の料金を確認します。

ログクラス毎に料金が異なるので、事前に確認しておきましょう。
ロググループ一覧を開き、ログクラスのカラムから確認することができます。

![](/images/20231229122838.png)

次に、期間あたりのデータの取り込み量ですが、これを確認するには CloudWatch Metrics を使います。

CloudWatch Metrics の一覧から、ログ > ロググループメトリクス の順で選択をしていきます。

![](/images/20231229114943.png)

![](/images/20231229115010.png)

ロググループのメトリクス一覧から、下記で Metrics Type を検索し、対象のロググループを選択します。

```
MetricName="IncomingBytes"
```

その後、グラフ化したメトリクスというタブから、統計と期間を変更することで、期間あたりのデータ量が確認できるようになります。
統計は**合計**にしましょう。

![](/images/20231229115349.png)

データのサイズから任意のログクラスの値を計算することで、料金が確認できます。

| ログの管理                | 料金       |
| ------------------------- | ---------- |
|収集 (データインジェスト) |            |
|　　スタンダード        | 0.76USD/GB |
|　　低頻度アクセス                          |            	0.38USD/GB|‎ ‎ ‎ ‎ 

## 保存にかかる料金

次に、データの保存にかかる料金です。

こちらの確認は非常に簡単で、対象のロググループを選択し、**保存されているバイト数**から１ヶ月あたりの料金を計算することで確認ができます。

| ログの管理                | 料金       |
| ------------------------- | ---------- |
|保存 (アーカイブ)|	0.033USD/GB|

# おわりに

CloudWatch Logs は意外と料金がかかります。特にデータ取り込み時ですね。

自分は今回、RDS の監査ログと全般ログの料金を調べてみたのですが、数千ドル単位で費用がかかっているものもいくつかありました。
この辺りのログは、利用率が低いものから順次機能オフにしていこうと思っています。
> Aurora の場合は Cluster 毎の出力、MySQL などは Instance 毎の出力でロググループも分割されていたりする

年末年始のこのタイミングで、コストの見直しに役立てば幸いです。

# 参考

[料金 - Amazon CloudWatch | AWS](https://aws.amazon.com/jp/cloudwatch/pricing/)

[CloudWatch Logs のコストを最適化する方法を教えてください | DevelopersIO](https://dev.classmethod.jp/articles/tsnote-how-to-optimize-cloudwatch-logs-cost/)
